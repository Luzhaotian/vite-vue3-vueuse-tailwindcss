import{h as e,j as a,k as l,l as t,v as o,m as r,n as s,o as i,p as n,g as d,q as p,r as u,d as c,s as m}from"./lzt-Jyq-MIJI.js";import{aB as g,o as h,P as b,M as y,r as v,k as f,w as z,c as w,R as x,u as k,aa as j,a8 as _,Q as P,F as S,J as B,X as A,a as O,T as U,W as $,K as V,ac as C,ad as L,aC as D,_ as T,L as M,am as R,U as F,V as N}from"./lzt-BNdyPEiD.js";import{Q as Y}from"./lzt-DuT-0hEZ.js";import{u as q}from"./lzt-DesDHJ0X.js";import{t as J,b as W}from"./lzt-BaF3Xh-s.js";import{_ as I}from"./lzt-T2rJrzHa.js";import{u as E}from"./lzt-B324S1Mc.js";import"./lzt-Bg5u8xPa.js";import"./lzt-D3lHDW-0.js";import"./lzt-D2GJhe6y.js";import"./lzt-BfbrdkjQ.js";import"./lzt-DKzlLy4L.js";import"./lzt-DvK128iR.js";import"./lzt-Cr-4-mSh.js";const G=Object.assign({name:"Pagination"},{__name:"index",props:{page:{type:Number,default:1,validator:e=>e>=1},pageModifiers:{},size:{type:Number,default:10,validator:e=>e>=1},sizeModifiers:{}},emits:["update:page","update:size"],setup(a){const l=g(a,"page"),t=g(a,"size");return(a,o)=>{const r=e;return h(),b(r,y(a.$props,{"current-page":l.value,"onUpdate:currentPage":o[0]||(o[0]=e=>l.value=e),"page-size":t.value,"onUpdate:pageSize":o[1]||(o[1]=e=>t.value=e),small:""}),null,16,["current-page","page-size"])}}}),Q=(e,{method:a,data:l},t)=>{Request({url:"/download",method:"get",responseType:"blob"}).then((e=>{const a=window.URL.createObjectURL(e.data),l=document.createElement("a");l.download="文件名字",l.href=a,l.click(),t()}))},K={class:"pagination-box flex-ec py-3"},X=Object.assign({name:"TableComponent"},{__name:"index",props:{downloadObject:{type:Object,default:()=>({})},isDownload:{type:Boolean,default:!0},tableColumn:{type:Array,required:!0,default:()=>[]},tableData:{type:Array,required:!0,default:()=>[]},tablePaginationArg:{type:Object,default:()=>({currentPage:1,pageSize:10,pageSizes:[10,20,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:0})},stripe:{type:Boolean,default:!1},isPaginationBox:{type:Boolean,default:!1}},emits:["on-pagination-change"],setup(e,{emit:r}){var s,i;const n=e,d=r,p=q(),u=v([]),c=v((null==(s=n.tablePaginationArg)?void 0:s.currentPage)??1),m=v((null==(i=n.tablePaginationArg)?void 0:i.pageSize)??10),g=v(!1),D=f((()=>n.tableData));z(D,(e=>{u.value=e}),{immediate:!0}),z((()=>{var e,a;return[null==(e=n.tablePaginationArg)?void 0:e.currentPage,null==(a=n.tablePaginationArg)?void 0:a.pageSize]}),(([e,a])=>{void 0!==e&&(c.value=e),void 0!==a&&(m.value=a)}),{immediate:!0});const T=f((()=>n.tableColumn)),M=e=>{const{label:a,sortable:l}=e,t=20+(void 0===l?24:0),o=a.split("").reduce(((e,a)=>e+(e=>e>="A"&&e<="Z"||e>="a"&&e<="z"?8:14)(a)),t);return`${Math.max(o,100)}px`},R=async()=>{const{url:e,data:a,method:l}=n.downloadObject??{};if(e){g.value=!0;try{await Q(0,{data:a,method:l})}finally{g.value=!1}}},F=e=>{m.value=e,d("on-pagination-change",{label:"pageSize",value:e})},N=e=>{c.value=e,d("on-pagination-change",{label:"pageNo",value:e})};return J((()=>{})),(r,s)=>{var i,n,d,v,f,z;const D=a,q=l,J=t,W=o;return h(),w("div",null,[x((h(),b(q,y(r.$attrs,{data:u.value,border:r.$attrs.border??!0,stripe:e.stripe,style:{width:"100%"}}),j({default:P((()=>[(h(!0),w(S,null,_(T.value,((e,a)=>(h(),w(S,{key:`col_${a}`},["selection"===e.type?(h(),b(D,{key:0,type:"selection"})):(h(),b(D,{key:1,"class-name":e.className,sortable:e.sortable??!0,label:e.label,"show-overflow-tooltip":e.showOverflowTooltip??!0,prop:e.slot?"":e.prop,"min-width":e.width||M(e),formatter:e.formatter,fixed:e.fixed,"sort-method":e.sortMethod,"sort-by":e.sortMethod?void 0:e.sortBy||((a,l)=>((e,a,l)=>l&&null!==e[l]?e[l]??-1:"")(a,0,e.prop))},j({_:2},[e.slot?{name:"default",fn:P((a=>[B(r.$slots,e.slot,{tableSlotColum:e,tableRow:a.row})])),key:"0"}:void 0]),1032,["class-name","sortable","label","show-overflow-tooltip","prop","min-width","formatter","fixed","sort-method","sort-by"]))],64)))),128))])),_:2},[_(r.$slots,((e,a)=>({name:a,fn:P((e=>[B(r.$slots,a,C(L(e)))]))})))]),1040,["data","border","stripe"])),[[W,k(p).loading]]),x(O("div",K,[O("div",null,[B(r.$slots,"paginationLeft"),e.isDownload&&(null==(i=e.downloadObject)?void 0:i.url)?(h(),b(J,{key:0,icon:k(Y),circle:"",loading:g.value,onClick:R},null,8,["icon","loading"])):U("",!0)]),$(k(G),{class:V({"ml-3":e.isDownload&&(null==(n=e.downloadObject)?void 0:n.url)}),"page-sizes":null==(d=e.tablePaginationArg)?void 0:d.pageSizes,layout:null==(v=e.tablePaginationArg)?void 0:v.layout,total:null==(f=e.tablePaginationArg)?void 0:f.total,page:c.value,"onUpdate:page":s[0]||(s[0]=e=>c.value=e),size:m.value,"onUpdate:size":s[1]||(s[1]=e=>m.value=e),onSizeChange:F,onCurrentChange:N},null,8,["class","page-sizes","layout","total","page","size"])],512),[[A,e.isPaginationBox||(null==(z=e.tablePaginationArg)?void 0:z.total)>0]])])}}}),Z={style:{"margin-left":"auto"}},H=I(Object.assign({name:"SearchForm"},{__name:"index",props:{form:{type:Object,default:()=>{}},searchList:{type:Array,default:()=>[]},isActions:{type:Boolean,default:!0},isResetBtn:{type:Boolean,default:!0},rulesForm:{type:Object,default:()=>{}},formLabelWidth:[String,Number]},emits:["on-search","on-reset"],setup(e,{emit:a}){D((e=>({"054d74e6":C.value})));const l=v(),o=e,g=a,f=(null==o?void 0:o.rulesForm)??{},z=(null==o?void 0:o.formLabelWidth)??"auto",x=(null==o?void 0:o.form)??{},j=q(),B=T(x),A=T(f),C=v(z);return(a,o)=>{const v=r,f=s,z=i,x=n,C=d,L=p,D=t,T=u,Y=c,q=m;return h(),b(q,{class:"mb-3"},{default:P((()=>{var t;return[(null==(t=e.searchList)?void 0:t.length)>0?(h(),b(Y,{key:0,inline:!0,model:B,class:"search-form-inline",ref_key:"formSearchRef",ref:l,rules:A},{default:P((()=>[$(T,{gutter:20},{default:P((()=>[(h(!0),w(S,null,_(e.searchList,(e=>(h(),b(L,{key:e.value,span:6},{default:P((()=>[$(C,{label:e.label,style:M({width:"100%",...e.formItemStyle}),prop:e.value},{default:P((()=>["input"===e.type?(h(),b(v,y({key:0,style:{width:"100%",...e.inputStyle},modelValue:B[e.value],"onUpdate:modelValue":a=>B[e.value]=a,modelModifiers:{trim:!0},clearable:e.clearable??!0,class:e.class,placeholder:e.placeholder,minlength:e.minlength??0,type:e.inputType??"text",maxlength:e.maxlength,"show-word-limit":e.showWordLimit},R(e.on??{})),null,16,["style","modelValue","onUpdate:modelValue","clearable","class","placeholder","minlength","type","maxlength","show-word-limit"])):"select"===e.type?(h(),b(z,{key:1,style:M({width:"100%",...e.selectStyle}),modelValue:B[e.value],"onUpdate:modelValue":a=>B[e.value]=a,placeholder:e.placeholder,clearable:e.clearable??!0,class:V(e.class),filterable:e.filterable??!1},{default:P((()=>[(h(!0),w(S,null,_(e.children,(({value:e,label:a},l)=>(h(),b(f,{key:l,value:e,label:a},null,8,["value","label"])))),128))])),_:2},1032,["style","modelValue","onUpdate:modelValue","placeholder","clearable","class","filterable"])):"picker"===e.type?(h(),b(x,{key:2,style:M({width:"100%",...e.pickerStyle}),modelValue:B[e.value],"onUpdate:modelValue":a=>B[e.value]=a,type:e.pickerType??"date",placeholder:e.placeholder??"","start-placeholder":"daterange"===e.pickerType?a.$t("common.startDate"):"","end-placeholder":"daterange"===e.pickerType?a.$t("common.endDate"):"","range-separator":"daterange"===e.pickerType?a.$t("common.dateTo"):"",clearable:e.clearable??!0,class:V(e.class),"value-format":e.valueFormat??"YYYY-MM-DD"},null,8,["style","modelValue","onUpdate:modelValue","type","placeholder","start-placeholder","end-placeholder","range-separator","clearable","class","value-format"])):U("",!0)])),_:2},1032,["label","style","prop"])])),_:2},1024)))),128)),e.isActions?(h(),b(L,{key:0,span:6,style:{display:"flex",width:"100%","margin-left":"auto"}},{default:P((()=>[O("div",Z,[$(D,{type:"primary",loading:k(j).loading,onClick:o[0]||(o[0]=e=>(async e=>{if(!e)return;await e.validate()&&g("on-search",B)})(l.value))},{default:P((()=>[F(N(a.$t("common.search")),1)])),_:1},8,["loading"]),e.isResetBtn?(h(),b(D,{key:0,type:"primary",onClick:o[1]||(o[1]=e=>(l.value.resetFields(),void g("on-reset",B)))},{default:P((()=>[F(N(a.$t("common.reset")),1)])),_:1})):U("",!0)])])),_:1})):U("",!0)])),_:1})])),_:1},8,["model","rules"])):U("",!0)]})),_:1})}}}),[["__scopeId","data-v-67c41fad"]]),ee={class:"wh-full"},ae=I(Object.assign({name:"User"},{__name:"index",setup(e){const a=T({currentPage:1,pageSize:10}),l=T({total:0,pageSizes:[10,20,30,40,50,100],layout:"total, sizes, prev, pager, next, jumper"}),t=E(),o=T({name:"",age:"",height:"",sex:"",birthday:[]}),r=[{label:"名字",prop:"name"},{label:"年龄",prop:"age"},{label:"身高",prop:"height"},{label:"性别",prop:"sex"},{label:"生日",prop:"birthday"}],s=v([{name:"Jane Doe",age:25,height:165,sex:"女",birthday:"02-15"},{name:"Jim Green",age:30,height:180,sex:"男",birthday:"03-10"},{name:"Joe Black",age:22,height:170,sex:"不详",birthday:"04-20"},{name:"Alice Blue",age:28,height:168,sex:"女",birthday:"05-25"},{name:"Bob Red",age:35,height:182,sex:"不详",birthday:"06-10"},{name:"Charlie Yellow",age:29,height:175,sex:"男",birthday:"07-20"},{name:"David Green",age:24,height:178,sex:"不详",birthday:"08-15"},{name:"Eva Brown",age:31,height:168,sex:"女",birthday:"09-10"},{name:"Frank Black",age:27,height:180,sex:"男",birthday:"10-20"}]),i=T([{label:"姓名",value:"name",type:"input",placeholder:"请输入姓名",on:{input:e=>{e.length>4&&(o.name="")}}},{label:"年龄",value:"age",type:"input",placeholder:"请输入年龄"},{label:"身高",value:"height",type:"input",placeholder:"请输入身高"},{label:"性别",value:"sex",type:"select",placeholder:"请输入性别",children:f((()=>t.sex))},{label:"生日",value:"birthday",type:"picker",placeholder:"请选择生日",pickerType:"daterange"}]),n=e=>{};return W((()=>{t.setOptions("sex")})),(e,t)=>(h(),w("div",ee,[$(k(H),{form:o,searchList:i,onOnSearch:n},null,8,["form","searchList"]),$(k(X),{isPaginationBox:"","table-pagination-arg":{...l,currentPage:a.currentPage,pageSize:a.pageSize},"table-column":r,"table-data":s.value},null,8,["table-pagination-arg","table-data"])]))}}),[["__scopeId","data-v-8f3b87a8"]]);export{ae as default};
